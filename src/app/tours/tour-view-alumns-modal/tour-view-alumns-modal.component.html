<div class="main-content" style="width: 100%; padding: 20px">
  <div class="container-fluid" style="width: 100%; padding: 20px">
    <div class="row">
      <div class="col-md-12" style="width: 100%; padding: 20px">

        <!-- Acciones (si necesitas otras, déjalas aquí) -->
        <div class="button-container"
             style="display:flex; gap:15px; justify-content:start; margin-bottom:10px;">
          <!-- Ejemplo: botón extra -->
          <!-- <button mat-raised-button color="primary" (click)="algunaAccion()">Acción</button> -->
        </div>

        <div class="card">
          <div class="card-header card-header-danger">
            <h4 class="card-title">Alumnos</h4>
          </div>

          <div class="card-body">

            <!-- Grupo de tabs (solo 1 tab en este caso) -->
            <mat-tab-group>
              <mat-tab label="Alumnos">

                <!-- Resumen arriba -->
                <section class="resumen-wrapper mat-elevation-z1" style="margin:12px 0 4px; padding:8px 12px; border-radius:8px; background:#fafafa;">
                  <div class="resumen-title" style="font-weight:600; margin-bottom:6px;">Resumen participantes</div>

                  <ul class="resumen-ul" style="list-style:none; margin:0; padding:0;">
                    <li style="display:flex; align-items:center; padding:6px 0; border-bottom:1px solid #eee;">
                      <span>Hombres</span><span style="flex:1;"></span>
                      <strong>{{ data?.detalle?.cantidadHombres || 0 }}</strong>
                    </li>
                    <li style="display:flex; align-items:center; padding:6px 0; border-bottom:1px solid #eee;">
                      <span>Mujeres</span><span style="flex:1;"></span>
                      <strong>{{ data?.detalle?.cantidadMujeres || 0 }}</strong>
                    </li>
                    <li style="display:flex; align-items:center; padding:6px 0; border-bottom:1px solid #eee;">
                      <span>Acomp. Femenino</span><span style="flex:1;"></span>
                      <strong>{{ data?.detalle?.acompananteFemenino || 0 }}</strong>
                    </li>
                    <li style="display:flex; align-items:center; padding:6px 0; border-bottom:1px solid #eee;">
                      <span>Acomp. Masculino</span><span style="flex:1;"></span>
                      <strong>{{ data?.detalle?.acompananteMasculino || 0 }}</strong>
                    </li>
                    <li class="total" style="display:flex; align-items:center; padding:6px 0; border-top:2px solid #ddd;">
                      <span>Total</span><span style="flex:1;"></span>
                      <strong>{{ total || (data?.detalle?.tourSalesStudentCount || 0) }}</strong>
                    </li>
                  </ul>

                  <div class="acciones-resumen" style="display:flex; justify-content:flex-end; gap:8px; margin-top:8px;">
                    <button mat-stroked-button color="primary" (click)="ObtenerListaAlumnos()">Refrescar lista</button>
                    <button mat-stroked-button (click)="refreshCounts()">Refrescar conteos</button>
                  </div>
                </section>

                <!-- Tabla -->
                <table mat-table [dataSource]="dataSourceAlumnos" matSort class="mat-elevation-z8" style="width:100%; margin-top:10px;">

                  <!-- Identificación -->
                  <ng-container matColumnDef="passengersIdentification">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Identificación</th>
                    <td mat-cell *matCellDef="let a">{{ a.passengersIdentification }}</td>
                  </ng-container>

                  <!-- Nombres -->
                  <ng-container matColumnDef="passengersNames">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombres</th>
                    <td mat-cell *matCellDef="let a">{{ a.passengersNames }}</td>
                  </ng-container>

                  <!-- Apellidos -->
                  <ng-container matColumnDef="passengersFatherLastName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Apellidos</th>
                    <td mat-cell *matCellDef="let a">
                      {{ (a.passengersFatherLastName || '') + ' ' + (a.passengersMotherLastName || '') }}
                    </td>
                  </ng-container>

                  <!-- Talla -->
                  <ng-container matColumnDef="passengersSize">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Talla</th>
                    <td mat-cell *matCellDef="let a">{{ a.passengersSize }}</td>
                  </ng-container>

                  <!-- Dieta -->
                  <ng-container matColumnDef="passengersDiet">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Dieta</th>
                    <td mat-cell *matCellDef="let a">{{ a.passengersDiet }}</td>
                  </ng-container>

                  <!-- Acompañante: Nombre -->
                  <ng-container matColumnDef="namePassengersAttorney">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Acomp. Nombre</th>
                    <td mat-cell *matCellDef="let a">{{ a.namePassengersAttorney }}</td>
                  </ng-container>

                  <!-- Acompañante: Email -->
                  <ng-container matColumnDef="emailPassengersAttorney">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Acomp. Email</th>
                    <td mat-cell *matCellDef="let a">{{ a.emailPassengersAttorney }}</td>
                  </ng-container>

                  <!-- Acompañante: Teléfono -->
                  <ng-container matColumnDef="phonePassengersAttorney">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Acomp. Teléfono</th>
                    <td mat-cell *matCellDef="let a">{{ a.phonePassengersAttorney }}</td>
                  </ng-container>

                  <!-- Activo -->
                  <ng-container matColumnDef="active">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Activo</th>
                    <td mat-cell *matCellDef="let a">{{ a.passengersActive ? 'Activo' : 'Inactivo' }}</td>
                  </ng-container>

                  <!-- Acciones -->
                  <ng-container matColumnDef="acciones">
                    <th mat-header-cell *matHeaderCellDef>Acciones</th>
                    <td mat-cell *matCellDef="let a" style="display:flex; gap:6px; align-items:center;">
                      <button mat-icon-button [color]="a.medicalRecord ? 'accent' : 'primary'"
                              (click)="medicalRecord(a)" matTooltip="Ficha Médica">
                        <mat-icon>medical_information</mat-icon>
                      </button>
                      <button mat-icon-button color="primary" (click)="voucherRecord(a)" matTooltip="Voucher">
                        <mat-icon>file_open</mat-icon>
                      </button>
                      <button mat-icon-button color="primary" (click)="openViewDialog(a)" matTooltip="Editar">
                        <mat-icon>edit</mat-icon>
                      </button>
                      <button mat-icon-button color="primary" (click)="deleteAction(a)" matTooltip="Eliminar">
                        <mat-icon>delete</mat-icon>
                      </button>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsAlumnos"></tr>
                  <tr mat-row *matRowDef="let a; columns: displayedColumnsAlumnos;"></tr>
                </table>

                <mat-paginator #paginatorAlumn [pageSizeOptions]="[5, 10, 25, 100]"
                               aria-label="Paginación alumnos"></mat-paginator>

              </mat-tab>
            </mat-tab-group>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>
